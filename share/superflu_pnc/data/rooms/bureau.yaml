name: "Bureau"
music: "sophie_mene_lenquete"
background: "bureau"
ground_map: "bureau_map"
front_z: 3240
back_z: 2330
character: "sophie"
coordinates: [ 800, 950 ]

scenery:

  - id: "bureau"
    coordinates: [ 363, 934, 2785 ]
    skin: "bureau"

  - id: "chaise1"
    coordinates: [ 93, 697, 2784 ]
    skin: "chaise1"

  - id: "chaise2"
    coordinates: [ 627, 1048, 3250 ]
    skin: "chaise2"

  - id: "chaise3"
    coordinates: [ 1166, 1093, 3250 ]
    skin: "chaise3"

objects:

  - id: "bouteille"
    name: "bouteille"
    coordinates: [ 351, 687, 2786 ]
    view: [ 351, 687 ]
    box_collision: true
    states:
      - { id: "defaut", skin: "bouteille" }
      - { id: "inventory", skin: "bouteille" }

  - id: "digicode"
    name: "digicode"
    coordinates: [ 964, 436, 2324 ]
    view: [ 964, 436 ]
    box_collision: false
    states:
      - { id: "defaut", skin: "digicode" }

  - id: "cendres"
    name: "cendres"
    coordinates: [ 0, 0, 0 ]
    view: [ 0, 0 ]
    box_collision: false
    states:
      - { id: "none" }
      - { id: "inventory", skin: "cendres" }

  - id: "clef_usb"
    name: "clef USB"
    coordinates: [ 122, 425, 2 ]
    view: [ 302, 711 ]
    box_collision: true
    states:
      - { id: "none" }
      - { id: "defaut", skin: "clef_usb" }
      - { id: "inventory", skin: "clef_usb" }

  - id: "coffre_fort"
    name: "coffre-fort"
    coordinates: [ 109, 457, 1 ]
    view: [ 302, 711 ]
    box_collision: false
    states:
      - { id: "none" }
      - { id: "ferme", skin: "coffre_fort_ferme" }
      - { id: "ouvert", skin: "coffre_fort_ouvert" }

  - id: "documents"
    name: "documents"
    coordinates: [ 536, 697, 2786 ]
    view: [ 429, 716 ]
    box_collision: false
    states:
      - { id: "defaut", skin: "documents" }

  - id: "ordinateur"
    name: "ordinateur"
    coordinates: [ 201, 722, 2786 ]
    view: [ 180, 728 ]
    box_collision: false
    states:
      - { id: "defaut", skin: "ordinateur" }
      - { id: "defaut_2", skin: "ordinateur" }
      - { id: "defaut_3", skin: "ordinateur" }
      - { id: "usb", skin: "ordinateur" }

  - id: "plante"
    name: "plante verte"
    coordinates: [ 962, 705, 2325 ]
    view: [ 862, 755 ]
    box_collision: false
    states:
      - { id: "defaut", skin: "plante" }
      - { id: "bougee", skin: "plante" }

  - id: "tableau"
    name: "tableau"
    coordinates: [ 125, 440, 1 ]
    view: [ 302, 711 ]
    box_collision: false
    states:
      - { id: "defaut", skin: "tableau" }
      - { id: "none" }

  - id: "telephone"
    name: "téléphone"
    coordinates: [ 0, 0, 0 ]
    view: [ 0, 0 ]
    box_collision: false
    states:
      - { id: "inventory", skin: "telephone" }

  - id: "tisonnier"
    name: "tisonnier"
    coordinates: [ 1655, 795, 1 ]
    view: [ 1544, 795 ]
    box_collision: true
    states:
      - { id: "defaut", skin: "tisonnier" }
      - { id: "inventory", skin: "tisonnier" }

actions:

  - id: "look"
    target: "bouteille"
    effect:
      - [ look ]
      - [ comment, "Pas moyen de lui faire utiliser une gourde... Harpagon adore son plastique jetable !" ]

  - id: "look"
    target: "coffre_fort"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ sync ]
      - [ show, "code_coffre_fort" ]

  - id: "look"
    target: "documents"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ sync ]
      - [ show, "table_ascii" ]

  - id: "look"
    target: "ordinateur"
    state: "defaut"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ sync ]
      - [ comment, "La session d'Harpagon est ouverte, mais je ne vois rien d'intéressant." ]

  - id: "look"
    target: "ordinateur"
    state: "defaut_2"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ sync ]
      - [ comment, "La session d'Harpagon est ouverte, mais je ne vois rien d'intéressant." ]

  - id: "look"
    target: "ordinateur"
    state: "defaut_3"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ sync ]
      - [ comment, "La session d'Harpagon est ouverte, mais je ne vois rien d'intéressant." ]

  - id: "look"
    target: "ordinateur"
    state: "usb"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ sync ]
      - [ show, "plan_qg" ]
      - [ comment, "Ce sont les plans du QG de Superflu sur lesquels Harpagon travaille en ce moment." ]

  - id: "look"
    target: "plante"
    effect:
      - [ look ]
      - [ comment, "C'est un yucca... c'est joli et ça ne demande pas trop d'entretien." ]

  - id: "look"
    target: "tableau"
    effect:
      - [ look ]
      - [ comment, "De l'art contemporain. Y'en a qui aiment..." ]

  - id: "move"
    target: "plante"
    state: "defaut"
    effect:
      - [ goto ]
      - [ sync ]
      - [ lock ]
      - [ look ]
      - [ pick_animation, 0.2 ]
      - [ sync ]
      - [ pick_animation, 0.2 ]
      - [ move, plante, 741, 723, 2325 ]
      - [ set_state, "plante", "bougee" ]
      - [ sync ]
      - [ unlock ]

  - id: "move"
    target: "plante"
    state: "bougee"
    effect:
      - [ look ]
      - [ comment, "Je ne vais pas passer mon temps à la déplacer..." ]

  - id: "open"
    target: "tableau"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ pick_animation, 0.2 ]
      - [ sync ]
      - [ set_state, "tableau", "none" ]
      - [ set_state, "coffre_fort", "ferme" ]
      - [ comment, "Le coffre-fort derrière le tableau, classique !" ]

  - id: "take"
    target: "bouteille"
    state: "defaut"
    effect:
      - [ goto ]
      - [ sync ]
      - [ pick_animation, 0.2 ]
      - [ sync ]
      - [ set_state, "bouteille", "inventory" ]

  - id: "take"
    target: "clef_usb"
    state: "defaut"
    effect:
      - [ goto ]
      - [ sync ]
      - [ pick_animation, 0.2 ]
      - [ sync ]
      - [ set_state, "clef_usb", "inventory" ]

  - id: "take"
    target: "tisonnier"
    state: "defaut"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ pick_animation, 0.2 ]
      - [ sync ]
      - [ set_state, "tisonnier", "inventory" ]
      - [ set_state, "cendres", "inventory" ]
      - [ comment, "Beurk, j'ai plein de cendres sur la main." ]

  - id: "use"
    source: "bouteille"
    target: "plante"
    effect:
      - [ goto ]
      - [ sync ]
      - [ lock ]
      - [ look ]
      - [ pick_animation, 1 ]
      - [ sync ]
      - [ unlock ]
      - [ comment, "Voilà, la plante est arrosée." ]
      
  - id: "use"
    source: "cendres"
    target: "coffre_fort"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ pick_animation, 0.2 ]
      - [ sync ]
      - [ set_state, "code_coffre_fort", "cendre" ]
      - [ comment, "La cendre accroche aux touches !" ]
      
  - id: "use"
    source: "cendres"
    target: "digicode"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ pick_animation, 0.2 ]
      - [ sync ]
      - [ comment, "C'était une bonne idée, mais le digicode est tout neuf, la cendre n'accroche pas." ]
      
  - id: "use"
    source: "clef_usb"
    target: "ordinateur"
    state: "defaut"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ pick_animation, 0.2 ]
      - [ sync ]
      - [ set_state, "ordinateur", "defaut_2" ]
      - [ comment, "Mince, mauvais sens." ]

  - id: "use"
    source: "clef_usb"
    target: "ordinateur"
    state: "defaut_2"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ pick_animation, 0.2 ]
      - [ sync ]
      - [ set_state, "ordinateur", "defaut_3" ]
      - [ comment, "Mince, ENCORE mauvais sens !" ]

  - id: "use"
    source: "clef_usb"
    target: "ordinateur"
    state: "defaut_3"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ pick_animation, 0.2 ]
      - [ sync ]
      - [ set_state, "clef_usb", "none" ]
      - [ set_state, "ordinateur", "usb" ]
      - [ comment, "C'est bon, j'ai mis la clef dans le bon sens. Il y a juste un PDF dessus." ]

  - id: "use"
    target: "ordinateur"
    state: "usb"
    effect:
      - [ goto ]
      - [ sync ]
      - [ look ]
      - [ sync ]
      - [ show, "plan_qg" ]
      - [ comment, "Ce sont les plans du QG de Superflu sur lesquels Harpagon travaille en ce moment." ]

windows:

  - id: "table_ascii"
    skin: "table_ascii"

  - id: "plan_qg"
    skin: "plan_qg"

codes:

  - id: "code_coffre_fort"
    states:
      - { id: "defaut", skin: [ "coffre_fort_off", "coffre_fort_on" ] }
      - { id: "cendre", skin: [ "coffre_fort_cendre_off", "coffre_fort_cendre_on" ] }
    button_sound: "bip"
    success_sound: "code_bon"
    failure_sound: "code_faux"
    buttons:
      - { value: 0, coordinates: [ 260, 672, 225, 200 ] }
      - { value: 1, coordinates: [ 25, 475, 225, 200 ] }
      - { value: 2, coordinates: [ 260, 475, 225, 200 ] }
      - { value: 3, coordinates: [ 500, 475, 225, 200 ] }
      - { value: 4, coordinates: [ 25, 250, 225, 200 ] }
      - { value: 5, coordinates: [ 260, 250, 225, 200 ] }
      - { value: 6, coordinates: [ 500, 250, 225, 200 ] }
      - { value: 7, coordinates: [ 25, 30, 225, 200 ] }
      - { value: 8, coordinates: [ 260, 30, 225, 200 ] }
      - { value: 9, coordinates: [ 500, 30, 225, 200 ] }
    answer: [ 1, 9, 8, 9 ]
    on_success:
      - [ comment, "1989, son année de naissance, bien sûr... hyper-sécurisé !" ]
      - [ set_state, "coffre_fort", "ouvert" ]
      - [ set_state, "clef_usb", "defaut" ]

  - id: "code_porte"
    states:
      - { id: "defaut", skin: [ "code_porte_off", "code_porte_on" ] }
    button_sound: "bip"
    success_sound: "code_bon"
    failure_sound: "code_faux"
    buttons:
      - { value: "4C", coordinates: [ 0, 0, 0, 0 ] }
      - { value: "45", coordinates: [ 0, 0, 0, 0 ] }
      - { value: "46", coordinates: [ 0, 0, 0, 0 ] }
      - { value: "47", coordinates: [ 0, 0, 0, 0 ] }
      - { value: "5C", coordinates: [ 0, 0, 0, 0 ] }
      - { value: "55", coordinates: [ 0, 0, 0, 0 ] }
      - { value: "56", coordinates: [ 0, 0, 0, 0 ] }
      - { value: "57", coordinates: [ 0, 0, 0, 0 ] }
      - { value: "6C", coordinates: [ 0, 0, 0, 0 ] }
      - { value: "65", coordinates: [ 0, 0, 0, 0 ] }
      - { value: "66", coordinates: [ 0, 0, 0, 0 ] }
      - { value: "67", coordinates: [ 0, 0, 0, 0 ] }
    answer: [ "46", "4C", "55", "47" ]
    on_success:
      - [ set_state, "coffre_fort", "ouvert" ]
