<?xml version="1.0" encoding="UTF-8"?>

<sosage_room
    name="Bureau"
    background="example"
    ground_map="example_map"
    body="sophie_corps"
    head="sophie_tete"
    x="800" y="870">

  <boolean id="clef_usb_prise" value="false" />
  
  <object id="bouteille"
          name="Bouteille d'eau"
          x="10" y="10">
    
    <state id="defaut"
           skin="bouteille">
      
      <look>
        <comment text="Pas moyen de lui faire utiliser une gourde… Il adore son plastique." />
      </look>

      <pick>
        <set_state object="bouteille" state="inventory" />
      </pick>

      <move>
        <comment text="Je n'ai pas envie d'en renverser sur le clavier." />
      </move>
      
    </state>

    <state id="inventory"
           skin="bouteille_inventaire">

      <use target="ordinateur">
        <comment text="Pour me faire virer ?" />
      </use>

      <use target="plante">
        <animate skin="verse_eau" duration="10" />
        <sync />
        <comment text="Voilà, elle est arrosée." />
      </use>

    </state>

  </object>

  <object id="cendres"
          name="Cendres">
    
    <state id="null">
    </state>

    <state id="inventory"
           skin="cendres">

    </state>

  </object>

  <object id="coffre_fort"
          name="Coffre fort"
          x="10" y="10">
    
    <state id="cache"
           skin="">
    </state>
    
    <state id="verrouille"
           skin="coffre_fort_ferme">
      
      <look>
        <window id="digicode"
                skin="digicode">
        </window>
      </look>
      
      <open>
        <comment text="Il est verrouillé." />
      </open>>
      
    </state>
    
    <state id="ouvert"
           skin="coffre_fort_ouvert">
      
      <look>
        <if cond="clef_usb_prise">
          <comment text="Il est vide." />
        </if>
        <else>
          <comment text="Il y a une clef USB à l'intérieur." />
        </else>
      </look>

      <close>
        <action_animation />
        <play_sound file="closing.wav" />
        <set_state object="coffre_fort" state="ferme" />
      </close>
      
    </state>
    
    <state id="ferme"
           skin="coffre_fort_ferme">
    </state>
    
  </object>

  <object id="telephone"
          name="Téléphone"
          x="-1" y="-1">
    
    <state id="inventory"
           skin="telephone">
      
      <look>
        <comment text="C'est mon téléphone. C'est pas le dernier cri, mais il marche." />
      </look>
      
      <use>
        <comment text="Je vais essayer d'appeler Harpagon." />
        <sync />
        <animate skin="telephone" duration="10" />
        <sync />
        <comment text="Ça ne répond pas." />
      </use>
      
    </state>
    
  </object>

  <object id="tisonnier"
          name="Tisonnier"
          x ="-1" y="-1">

    <state id="default"
           skin="tisonnier">

      <look>
        <comment text="Un beau tisonnier plein de cendres…" />
      </look>

      <pick>
        <animate skin="prendre" duration="1" />
        <sync />
        <set_state object="cendres" state="inventory" />
        <set_state object="tisonnier" state="inventory" />
        <comment text="Beurk, j'ai ramassé un gros paquet de cendres avec…" />
      </pick>

    </state>
    
  </object>
    
</sosage_room>
